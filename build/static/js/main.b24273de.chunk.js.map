{"version":3,"sources":["img/plus.svg","img/cross.svg","components/ColumnTitle.js","components/ColumnTaskListItem.js","components/ColumnTaskList.js","components/ColumnAdd.js","components/ColumnAddForm.js","components/Column.js","components/DragManager.js","components/BackgroundImageBlock.js","components/BackgroundUploader.js","index.js"],"names":["module","exports","__webpack_require__","p","ColumnTitle","props","titleDiv","react_default","a","createElement","className","onClick","openChangeForm","data-value","title","deleteColumn","columnId","src","imgSrc","alt","ColumnTaskListItem","id","taskId","text","deleteTask","ColumnTaskList","_this$props","this","tasks","revisedTasks","map","task","components_ColumnTaskListItem","key","Component","ColumnAdd","class","openForm","ColumnAddForm","tag","placeholder","textfieldPlaceholder","ref","textfieldRef","columnTextfieldPlaceholder","addValue","plusImg","require","crossImg","Column","React","createRef","state","addFormOpen","openAddForm","textfield","_this","current","value","focus","setState","_ref","event","target","dataset","clicked","stopDrag","innerText","trim","classList","contains","replaceElement","changeValueFunc","changeValue","window","addEventListener","addColumnTask","addNewColumn","document","activeElement","updateColumnTitle","updateColumnTask","startDrag","removeEventListener","source","newType","newClassName","arguments","length","undefined","newElement","tagName","replaceWith","deleteColumnTask","addFormTag","addBtnText","addFormBtnText","addBtnClass","addFormClass","components_ColumnTitle","ColumnTaskList_ColumnTaskList","Math","random","components_ColumnAdd","components_ColumnAddForm","itemShadow","DragManager","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","start","isMobile","dragStart","drag","dragEnd","stop","which","touches","closest","concat","dragItemClass","dragItem","item","style","width","getBoundingClientRect","height","shift","x","left","targetTouches","clientX","y","top","clientY","checkForScroll","dragAreaClass","dragArea","findElement","eventCoords","position","transform","pointerEvents","zIndex","area","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","children","Symbol","iterator","next","done","child","collideItems","remove","err","return","itemArea","appendChild","shadow","namedItem","collisionItem","collisionItemList","parentElement","prevElement","previousElementSibling","nextElement","nextElementSibling","getCollideDirection","insertBefore","insertAfter","prevColumnId","prevTaskId","newColumnId","setAttribute","push","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","updateColumnTasks","type","clearTimeout","windowScrollId","columnScrollId","adjustWindowScroll","setTimeout","itemCoords","step","documentCoords","documentElement","clientWidth","right","scrollLeft","columnTitle","columnAddBtn","columnTitleCoords","bottom","scrollTop","columnAddBtnCoords","attributeValue","element","elementFromPoint","item1","item2","item1Coords","item2Coords","refElement","test","navigator","userAgent","_this2","columns","react","column","Column_Column","assign","BackgroundImageBlock","backgroundImageBlockRef","BackgroundUploader","deleteBackgroundImage","htmlFor","onChange","addBackgroundImage","Board","JSON","parse","localStorage","getItem","backgroundImageURL","newColumn","splice","setItem","stringify","newTask","newTitle","image","files","reader","FileReader","imageBlock","startsWith","onload","background","result","backgroundSize","readAsDataURL","imageURL","DragManager_DragManager","components_BackgroundImageBlock","components_BackgroundUploader","ReactDOM","render","src_Board","getElementById"],"mappings":"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","file":"static/js/main.b24273de.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/plus.6cb6e5fc.svg\";","module.exports = __webpack_public_path__ + \"static/media/cross.5fe0db66.svg\";","import React from 'react';\r\n\r\nconst ColumnTitle = props => {\r\n\tconst titleDiv = <div className = 'column-title'>\r\n\t\t\t\t\t     <div className = 'column-title__text title' \r\n\t\t\t\t\t     \t  onClick = { props.openChangeForm }\r\n\t\t\t\t\t     \t  data-value = { props.title }>{ props.title }</div>\r\n\t\t\t\t\t\t <button className = 'button-delete' \r\n\t\t\t\t\t\t \t\t title = 'Удалить список' \r\n\t\t\t\t\t\t \t\t onClick = { () => props.deleteColumn(props.columnId) }>\r\n\t\t\t\t\t\t     <img src = { props.imgSrc } alt = 'Изображение' />\r\n\t\t\t\t\t\t </button>\r\n\t\t\t\t\t </div>;\r\n\r\n\treturn props.title ? titleDiv : null\r\n};\r\n\r\nexport default ColumnTitle","import React from 'react';\r\n\r\nconst ColumnTaskListItem = props => {\r\n\treturn (\r\n\t\t<div className = 'column-task-list__item' id = { props.taskId } data-value = { props.text }>\r\n\t\t\t<div className = 'column-task-list__item-text task'\r\n\t\t\t\t id = { props.taskId } \r\n\t\t\t\t onClick = { props.openChangeForm }>{ props.text }</div>\r\n\t\t\t<button className = 'button-delete' title = 'Удалить задачу' onClick = { () => props.deleteTask(props.columnId, props.taskId) }>\r\n\t\t\t\t<img src = { props.imgSrc } alt = 'Изображение' />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n};\r\n\r\nexport default ColumnTaskListItem","import React, { Component } from 'react';\r\n\r\nimport ColumnTaskListItem from './ColumnTaskListItem';\r\n\r\nexport default class ColumnTaskList extends Component {\r\n\r\n\trender() {\r\n\t\tconst { tasks, openChangeForm, deleteTask, columnId, imgSrc, id } = this.props;\r\n\t\tlet revisedTasks = [];\r\n\r\n\t\tif (tasks) {\r\n\t\t\trevisedTasks = tasks.map((task, id) => {\r\n\t\t\t\t\t\t       return <ColumnTaskListItem text = { task.text } \r\n\t\t\t\t\t\t\t\t\t\t                  key = { id } \r\n\t\t\t\t\t\t\t\t\t\t                  taskId = { id } \r\n\t\t\t\t\t\t\t\t\t\t                  columnId = { columnId }\r\n\t\t\t\t\t\t\t\t\t\t                  openChangeForm = { openChangeForm } \r\n\t\t\t\t\t\t\t\t\t\t                  deleteTask = { deleteTask }\r\n\t\t\t\t\t\t\t\t\t\t                  imgSrc = { imgSrc } />\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn <div className = 'column-task-list' id = { id }>{ revisedTasks }</div>\r\n\t}\r\n}","import React from 'react';\r\n\r\nconst ColumnAdd = props => {\r\n\treturn (\r\n\t\t<div className = { props.class } onClick = { props.openForm }>\r\n\t\t\t<img src = { props.imgSrc } alt = 'Изображение' />\r\n\t\t\t<span>{ props.text }</span>\r\n\t\t</div>\r\n\t)\r\n};\r\n\r\nexport default ColumnAdd","import React from 'react';\r\n\r\nconst ColumnAddForm = props => {\r\n\treturn (\r\n\t\t<div className = { props.class }>\r\n\t\t\t{ props.tag === 'textarea' ?\r\n\t\t\t\t<textarea \r\n\t\t\t\t\tclassName = 'textfield task' \r\n\t\t\t\t\tplaceholder = { props.textfieldPlaceholder }\r\n\t\t\t\t\tref = { props.textfieldRef }>\r\n\t\t\t\t</textarea> :\r\n\t\t\t\t<input \r\n\t\t\t\t\tclassName = 'textfield title' \r\n\t\t\t\t\tplaceholder = { props.columnTextfieldPlaceholder }\r\n\t\t\t\t\tref = { props.textfieldRef }>\r\n\t\t\t\t</input>\r\n\t\t\t}\r\n\t\t\t<div className = 'column-add-form__buttons'>\r\n\t\t\t\t<button className = 'column-add-form__buttons-add' onClick = { props.addValue }>{ props.text }</button>\r\n\t\t\t\t<button className = 'button-close' title = 'Закрыть поле ввода' onClick = { props.openForm }>\r\n\t\t\t\t\t<img src = { props.imgSrc } alt = 'Изображение' />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n};\r\n\r\nexport default ColumnAddForm","import React, { Component } from 'react';\r\n\r\nimport ColumnTitle from './ColumnTitle';\r\nimport ColumnTaskList from './ColumnTaskList';\r\nimport ColumnAdd from './ColumnAdd';\r\nimport ColumnAddForm from './ColumnAddForm';\r\n\r\nconst plusImg = require('../img/plus.svg');\r\nconst crossImg = require('../img/cross.svg');\r\n\r\nexport default class Column extends Component {\r\n\r\n\ttextfieldRef = React.createRef();\r\n\r\n\tstate = {\r\n\t\taddFormOpen: false,\r\n\t};\r\n\r\n\topenAddForm = () => {\r\n\t\tconst textfield = this.textfieldRef.current;\r\n\r\n\t\ttextfield.value = '';\r\n\t\ttextfield.focus();\r\n\r\n\t\tthis.setState(({ addFormOpen }) => ({ addFormOpen: !addFormOpen }));\r\n\t};\r\n\r\n\topenChangeForm = event => {\r\n\t\tif (event.target.dataset.clicked === 'true') return;\r\n\t\tthis.props.stopDrag();\r\n\r\n\t\tconst target = event.target;\r\n\t\ttarget.dataset.clicked = true;\r\n\t\ttarget.dataset.value = target.innerText.trim();\r\n\r\n\t\tlet textfield = null;\r\n\r\n\t\tif (target.classList.contains('title')) {\r\n\t\t\ttextfield = this.replaceElement(target, 'input', 'textfield title');\r\n\t\t} else if (target.classList.contains('task')) {\r\n\t\t\ttextfield = this.replaceElement(target, 'textarea', 'textfield task');\r\n\t\t}\r\n\r\n\t\ttextfield.focus();\r\n\r\n\t\tthis.changeValueFunc = () => this.changeValue(textfield, target);\r\n\t\twindow.addEventListener('click', this.changeValueFunc);\r\n\t};\r\n\r\n\r\n\taddValue = () => {\r\n\t\tconst textfield = this.textfieldRef.current;\r\n\t\tconst columnId = this.props.id;\r\n\t\tconst value = textfield.value.trim();\r\n\r\n\t\tif (!value) return;\r\n\r\n\t\tthis.openAddForm();\r\n\r\n\t\tif (textfield.classList.contains('task')) {\r\n\t\t\tthis.props.addColumnTask(value, columnId);\r\n\t\t} \r\n\r\n\t\tif (textfield.classList.contains('title')) {\r\n\t\t\tthis.props.addNewColumn(value, columnId);\r\n\t\t}\r\n\r\n\t\ttextfield.value = '';\r\n\t};\r\n\r\n\tchangeValue = (textfield, target) => {\r\n\t\tif (document.activeElement !== textfield) {\r\n\t\t\tconst columnId = this.props.id;\r\n\t\t\tconst taskId = textfield.id;\r\n\t\t\tconst value = textfield.value.trim();\r\n\t\t\t\r\n\t\t\tif (value === '') {\r\n\t\t\t\ttextfield.value = target.dataset.value;\r\n\t\t\t} else {\r\n\t\t\t\tif (textfield.classList.contains('title')) {\r\n\t\t\t\t\tthis.props.updateColumnTitle(value, columnId);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (textfield.classList.contains('task')) {\r\n\t\t\t\t\tthis.props.updateColumnTask(value, columnId, taskId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttextfield.dataset.clicked = false;\r\n\t\t\ttextfield.dataset.value = value;\r\n\r\n\t\t\tthis.replaceElement(textfield, 'div', target.className);\r\n\t\t\tthis.props.startDrag();\r\n\t\t\twindow.removeEventListener('click', this.changeValueFunc);\r\n\t\t}\r\n\t};\r\n\r\n\treplaceElement = (source, newType, newClassName = null) => {\r\n\t\tconst newElement = document.createElement(newType);\r\n\t\tnewElement.dataset.clicked = source.dataset.clicked;\r\n\t\tnewElement.dataset.value = source.dataset.value;\r\n\r\n\t\tif (newClassName) newElement.className = newClassName;\r\n\t\tif (newElement.classList.contains('title') === false) newElement.id = source.id;\r\n\r\n\t\tnewElement.addEventListener('click', this.openChangeForm);\r\n\r\n\t\tif (source.tagName === 'INPUT' || source.tagName === 'TEXTAREA') {\r\n\t\t\tnewElement.innerText = source.value;\r\n\t\t} else {\r\n\t\t\tnewElement.value = source.innerText;\r\n\t\t}\r\n\r\n\t\tsource.replaceWith(newElement);\r\n\r\n\t\treturn newElement\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { addFormOpen } = this.state;\r\n\t\tconst { tasks, title, deleteColumnTask, deleteColumn, id } = this.props;\r\n\r\n\t\tconst addFormTag = !title ? 'input' : 'textarea';\r\n\t\tconst addBtnText = !title ? 'Добавить еще одну колонку' : 'Добавить еще одну карточку';\r\n\t\tconst addFormBtnText = !title ? 'Добавить колонку' : 'Добавить карточку';\r\n\t\tconst textfieldPlaceholder = !title ? 'Введите название колонки' : 'Введите название карточки';\r\n\r\n\t\tconst addBtnClass = addFormOpen ? 'column-add-btn hidden' : 'column-add-btn';\r\n\t\tconst addFormClass = addFormOpen ? 'column-add-form' : 'column-add-form hidden';\r\n\r\n\t\treturn (\r\n\t\t\t<div className = 'column'>\r\n\t\t\t\t<ColumnTitle openChangeForm = { this.openChangeForm }\r\n\t\t\t\t\t\t\t deleteColumn = { deleteColumn }\r\n\t\t\t\t\t\t\t imgSrc = { crossImg }\r\n\t\t\t\t\t\t\t title = { title } \r\n\t\t\t\t\t\t\t columnId = { id } />\r\n\r\n\t\t\t\t{ title ? <ColumnTaskList key = { Math.random() }\r\n\t\t\t\t\t\t\t\t\t\t  id = { id }\r\n\t\t\t\t\t\t\t\t\t\t  tasks = { tasks } \r\n\t\t\t\t\t\t\t\t\t\t  columnId = { id }\r\n\t\t\t\t\t\t\t\t\t      openChangeForm = { this.openChangeForm } \r\n\t\t\t\t\t\t\t\t\t      deleteTask = { deleteColumnTask }\r\n\t\t\t\t\t\t\t\t \t      imgSrc = { crossImg } /> : null\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<ColumnAdd class = { addBtnClass }\r\n\t\t\t\t\t       text = { addBtnText }\r\n\t\t\t\t\t       openForm = { this.openAddForm } \r\n\t\t\t\t\t       imgSrc = { plusImg } />\r\n\r\n\t\t\t\t<ColumnAddForm tag = { addFormTag }\r\n\t\t\t\t\t           class = { addFormClass }\r\n\t\t\t\t\t           textfieldPlaceholder = { textfieldPlaceholder }\r\n\t\t\t\t\t\t\t   text = { addFormBtnText }\r\n\t\t\t\t\t\t\t   textfieldRef = { this.textfieldRef }\r\n\t\t\t\t\t\t\t   addValue = { this.addValue }\r\n\t\t\t\t\t\t\t   openForm = { this.openAddForm }\r\n\t\t\t\t\t\t\t   imgSrc = { crossImg } />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}","import React, { Component, Fragment } from 'react';\r\n\r\nimport Column from './Column';\r\n\r\nconst itemShadow = document.createElement('div');\r\nitemShadow.id = 'column-task-list__item-shadow';\r\n\r\nexport default class DragManager extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.dragItem = {};\r\n\t\tthis.shift = {};\r\n\r\n\t\tthis.dragItemClass = 'column-task-list__item';\r\n\t\tthis.dragAreaClass = 'column-task-list';\r\n\r\n\t\tthis.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/.test(navigator.userAgent);\r\n\t};\r\n\r\n\tstart = () => {\r\n\t\tif (this.isMobile) {\r\n\t\t\twindow.addEventListener('touchstart', this.dragStart);\r\n\t\t\twindow.addEventListener('touchmove', this.drag);\r\n\t\t\twindow.addEventListener('touchend', this.dragEnd);\r\n\t\t} else {\r\n\t\t\twindow.addEventListener('mousedown', this.dragStart);\r\n\t\t\twindow.addEventListener('mousemove', this.drag);\r\n\t\t\twindow.addEventListener('mouseup', this.dragEnd);\r\n\t\t}\r\n\t};\r\n\r\n\tstop = () => {\r\n\t\tif (this.isMobile) {\r\n\t\t\twindow.removeEventListener('touchstart', this.dragStart);\r\n\t\t\twindow.removeEventListener('touchmove', this.drag);\r\n\t\t\twindow.removeEventListener('touchend', this.dragEnd);\r\n\t\t} else {\r\n\t\t\twindow.removeEventListener('mousedown', this.dragStart);\r\n\t\t\twindow.removeEventListener('mousemove', this.drag);\r\n\t\t\twindow.removeEventListener('mouseup', this.dragEnd);\r\n\t\t}\r\n\t};\r\n\r\n\tdragStart = event => {\r\n\t\tif (this.isMobile) {\r\n\t\t\tif (event.which !== 0 || event.touches.length > 1 || !event.target.closest(`.${this.dragItemClass}`)) return;\r\n\t\t} else {\r\n\t\t\tif (event.which !== 1 || !event.target.closest(`.${this.dragItemClass}`)) return;\r\n\t\t}\r\n\t\t\r\n\t\tconst dragItem = this.dragItem;\r\n\r\n\t\tdragItem.item = event.target.closest(`.${this.dragItemClass}`);\r\n\r\n\t\tdragItem.item.style.width = dragItem.item.getBoundingClientRect().width + 'px';\r\n\t\tdragItem.item.style.height = dragItem.item.getBoundingClientRect().height + 'px';\r\n\r\n\t\tif (this.isMobile) {\r\n\t\t\tthis.shift = {x: dragItem.item.getBoundingClientRect().left - event.targetTouches[0].clientX, \r\n\t\t\t\t\t      y: dragItem.item.getBoundingClientRect().top - event.targetTouches[0].clientY};\r\n\t\t} else {\r\n\t\t\tthis.shift = {x: dragItem.item.getBoundingClientRect().left - event.clientX, \r\n\t\t\t\t     \t  y: dragItem.item.getBoundingClientRect().top - event.clientY};\r\n\t\t}\r\n\t};\r\n\r\n\tdrag = event => {\r\n\t\tif (!this.dragItem.item) return;\r\n\r\n\t\tthis.checkForScroll(event, 'window', 'horizontal');\r\n\t\tthis.checkForScroll(event, 'column', 'vertical');\r\n\r\n\t\tconst item = this.dragItem.item;\r\n\r\n\t\tconst dragAreaClass = this.dragAreaClass;\r\n\t\tconst dragItemClass = this.dragItemClass;\r\n\r\n\t\tconst dragArea = this.findElement(event, dragAreaClass);\r\n\t\tconst dragItem = this.findElement(event, dragItemClass);\r\n\r\n\t\tconst shift = this.shift;\r\n\t\tconst eventCoords = {x: this.isMobile ? event.targetTouches[0].clientX : event.clientX,\r\n\t\t\t\t\t\t\t y: this.isMobile ? event.targetTouches[0].clientY : event.clientY};\r\n\r\n\t\titem.style.position = 'fixed';\r\n\t\titem.style.top = eventCoords.y + shift.y + 'px';\r\n\t\titem.style.left = eventCoords.x + shift.x + 'px';\r\n\t\titem.style.transform = 'rotate(5deg)';\r\n\t\titem.style.pointerEvents = 'none';\r\n\t\titem.style.zIndex = 2;\r\n\r\n\t\tif (this.dragItem.area) {\r\n\t\t\tfor (let child of this.dragItem.area.children) {\r\n\t\t\t\tif (child.id === itemShadow.id && this.collideItems(item, child) === false) {\r\n\t\t\t\t\tchild.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t  \t\r\n\t\tif (dragArea) {\r\n\t\t\tconst itemArea = dragArea;\r\n\r\n\t\t\tif (itemArea.children.length <= 1) {\r\n\t\t\t\titemArea.appendChild(itemShadow);\r\n\t\t\t\titemShadow.style.height = item.style.height;\r\n\r\n\t\t\t\tthis.dragItem.shadow = itemArea.children.namedItem(itemShadow.id);\r\n\t\t\t\tthis.dragItem.area = itemArea;\r\n\t\t\t} \r\n\t\t}\r\n\r\n\t\tif (dragItem) {\r\n\t\t\tconst collisionItem = dragItem;\r\n\t\t\tconst collisionItemList = collisionItem.parentElement;\r\n\r\n\t\t\tconst prevElement = collisionItem.previousElementSibling;\r\n\t\t\tconst nextElement = collisionItem.nextElementSibling;\r\n\r\n\t\t\tif (this.getCollideDirection(collisionItem) === 'top' && this.collideItems(item, collisionItem)) {\r\n\t\t\t\tif (prevElement && prevElement.id === itemShadow.id) return;\r\n\t\t\t\tif (nextElement && nextElement.id === itemShadow.id) nextElement.remove();\r\n\r\n\t\t\t\tcollisionItemList.insertBefore(itemShadow, collisionItem);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.getCollideDirection(collisionItem) === 'bottom' && this.collideItems(item, collisionItem)) {\r\n\t\t\t\tif (nextElement && nextElement.id === itemShadow.id) return;\r\n\t\t\t\tif (prevElement && prevElement.id === itemShadow.id) prevElement.remove();\r\n\r\n\t\t\t\tthis.insertAfter(itemShadow, collisionItem);\r\n\t\t\t}\r\n\r\n\t\t\titemShadow.style.height = item.style.height;\r\n\r\n\t\t\tthis.dragItem.shadow = collisionItemList.children.namedItem(itemShadow.id);\r\n\t\t\tthis.dragItem.area = collisionItemList;\r\n\t\t\tthis.dragItem.collisionItem = collisionItem;\r\n\t\t}\r\n\t};\r\n\r\n\tdragEnd = event => {\r\n\t\tif (!this.dragItem.item) return;\r\n\r\n\t\tconst item = this.dragItem.item;\r\n\t\r\n\t\tif (itemShadow && itemShadow.parentElement) {\r\n\t\t\tconst prevColumnId = item.parentElement.id;\r\n\t\t\tconst prevTaskId = item.id;\r\n\r\n\t\t\tconst newColumnId = itemShadow.parentElement.id;\r\n\t\t\tconst tasks = [];\r\n\r\n\t\t\titem.setAttribute('style', 'none');\r\n\t\t\titemShadow.replaceWith(item);\r\n\r\n\t\t\tif (item.parentElement.children.length === 0) {\r\n\t\t\t\ttasks.push({ text: item.dataset.value }); \r\n\t\t\t} else {\r\n\t\t\t\tfor (let child of item.parentElement.children) {\r\n\t\t\t\t\tif (child !== itemShadow) tasks.push({ text: child.dataset.value });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.props.deleteColumnTask(prevColumnId, prevTaskId);\r\n\t\t\tthis.props.updateColumnTasks(tasks, newColumnId);\r\n\t\t} else {\r\n\t\t\titem.setAttribute('style', 'none');\r\n\t\t}\r\n\r\n\t\tthis.dragItem = {};\r\n\t};\r\n\r\n\tcheckForScroll = (event, target, type) => {\r\n\t\tif (target === 'window') clearTimeout(this.windowScrollId);\r\n\t\tif (target === 'column') clearTimeout(this.columnScrollId);\r\n\r\n\t\tif (this.adjustWindowScroll(event, target, type)) {\r\n\t\t\tif (target === 'window') this.windowScrollId = setTimeout(() => this.checkForScroll(event, target, type), 20);\r\n\t\t\tif (target === 'column') this.columnScrollId = setTimeout(() => this.checkForScroll(event, target, type), 20);\r\n\t\t}\r\n\t};\r\n\r\n\tadjustWindowScroll = (event, target, type) => {\r\n\t\tif (!this.dragItem.item) return;\r\n\r\n\t\tconst item = this.dragItem.item;\r\n\t\tconst itemCoords = item.getBoundingClientRect();\r\n\r\n\t\tif (target === 'window' && type === 'horizontal') {\r\n\t\t\tconst step = this.isMobile ? 10 : 30;\r\n\t\t\tconst documentCoords = {left: document.documentElement.clientWidth - document.documentElement.clientWidth,\r\n\t\t\t\t\t\t\t\t\tright: document.documentElement.clientWidth};\r\n\r\n\t\t\tif (itemCoords.right + 20 > documentCoords.right) {\r\n\t\t\t\tdocument.documentElement.scrollLeft += step;\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\r\n\t\t\tif (itemCoords.left - 20 < documentCoords.left) {\r\n\t\t\t\tdocument.documentElement.scrollLeft -= step;\r\n\t\t\t\treturn true\r\n\t\t\t} \r\n\t\t}\r\n\r\n\t\tif (target === 'column' && type === 'vertical') {\r\n\t\t\tconst step = 5;\r\n\r\n\t\t\tconst columnTitle = this.findElement(event, 'column-title');\r\n\t\t\tconst columnAddBtn = this.findElement(event, 'column-add-btn');\r\n\r\n\t\t\tif (columnTitle) {\r\n\t\t\t\tconst columnTitleCoords = columnTitle.getBoundingClientRect();\r\n\r\n\t\t\t\tif (event.clientY > columnTitleCoords.top && event.clientY < columnTitleCoords.bottom) {\r\n\t\t\t\t\tcolumnTitle.parentElement.scrollTop -= step;\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (columnAddBtn) {\r\n\t\t\t\tconst columnAddBtnCoords = columnAddBtn.getBoundingClientRect();\r\n\r\n\t\t\t\tif (event.clientY > columnAddBtnCoords.top && event.clientY < columnAddBtnCoords.bottom) {\r\n\t\t\t\t\tcolumnAddBtn.parentElement.scrollTop += step;\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t};\r\n\r\n\tfindElement = (event, attributeValue) => {\r\n\t\tconst eventCoords = {x: this.isMobile ? event.targetTouches[0].clientX : event.clientX,\r\n\t\t\t\t\t\t\t y: this.isMobile ? event.targetTouches[0].clientY : event.clientY};\r\n\t\tlet element = document.elementFromPoint(eventCoords.x, eventCoords.y);\r\n\t\t\r\n\t\tfor (; element && element !== document; element = element.parentElement) {\r\n\t\t\tif (element.classList.contains(attributeValue) || element.id === attributeValue) return element\r\n\t\t}\r\n\t};\r\n\r\n\tgetCollideDirection = item => {\r\n\t\tconst itemCoords = item.getBoundingClientRect();\r\n\t\tconst event = window.event;\r\n\t\tconst eventCoords = {x: this.isMobile ? event.targetTouches[0].clientX : event.clientX,\r\n\t\t\t\t\t\t\t y: this.isMobile ? event.targetTouches[0].clientY : event.clientY};\r\n\r\n\t\tif ((eventCoords.y > itemCoords.top) && \r\n\t\t\t(eventCoords.y < itemCoords.top + itemCoords.height / 2)) return 'top';\r\n\r\n\t\tif ((eventCoords.y < itemCoords.bottom) && \r\n\t\t\t(eventCoords.y > itemCoords.top + itemCoords.height / 2)) return 'bottom';\r\n\t};\r\n\r\n\tcollideItems = (item1, item2) => {\r\n\t\tconst item1Coords = item1.getBoundingClientRect();\r\n\t\tconst item2Coords = item2.getBoundingClientRect();\r\n\r\n\t\treturn !((item1Coords.top + item1Coords.height < item2Coords.top)\t   ||\r\n\t     \t\t (item1Coords.top > item2Coords.top + item2Coords.height)      ||\r\n\t     \t\t (item1Coords.left + item1Coords.width / 2 < item2Coords.left) ||\r\n\t     \t\t (item1Coords.left + item1Coords.width / 2 > item2Coords.right));\r\n\t};\r\n\r\n\tinsertAfter = (element, refElement) => {\r\n\t\treturn refElement.parentElement.insertBefore(element, refElement.nextElementSibling);\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.start();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { columns } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t{ columns ? (columns.map((column, id) => {\r\n\t\t\t\t\t\t\t\treturn <Column key = { id }\r\n\t\t\t\t\t\t\t   \t\t\t   \t   id = { id }\r\n\t\t\t\t\t\t\t               \t   title = { column.title }\r\n\t\t\t\t\t\t\t               \t   tasks = { column.tasks }\r\n\t\t\t\t\t\t\t               \t   startDrag = { this.start }\r\n\t\t\t\t\t\t\t               \t   stopDrag = { this.stop }\r\n\t\t\t\t\t\t\t               \t   { ...this.props } />\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t) : <Column key = { 0 } id = { 0 } { ...this.props } /> }\r\n\t\t\t</Fragment>\r\n\t\t)\r\n\t}\r\n}","import React from 'react';\r\n\r\nconst BackgroundImageBlock = props => {\r\n\treturn <div id = 'main-wrap__background-image-block' ref = { props.backgroundImageBlockRef }></div>\r\n};\r\n\r\nexport default BackgroundImageBlock","import React from 'react';\r\n\r\nconst BackgroundUploader = props => {\r\n\treturn (\r\n\t\t<div id = 'main-wrap-upload__background'>\r\n\t\t\t<div className = 'label-delete'>\r\n\t\t\t\t<label title = 'Удалить фон' \r\n\t\t\t\t\t   className = 'main-wrap-upload__background-label'\r\n\t\t\t\t\t   onClick = { props.deleteBackgroundImage }>+</label>\r\n\t\t\t</div>\r\n\t\t\t<div className = 'label-add'>\r\n\t\t\t\t<label title = 'Загрузить фон' \r\n\t\t\t\t\t   htmlFor = 'main-wrap-upload__background-input' \r\n\t\t\t\t\t   className = 'main-wrap-upload__background-label'>+</label>\r\n\t\t\t</div>\r\n\t\t\t<input type = 'file' id = 'main-wrap-upload__background-input' onChange = { props.addBackgroundImage }/>\r\n\t\t</div>\r\n\t)\r\n};\r\n\r\nexport default BackgroundUploader","import React, { Component, Fragment } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport DragManager from './components/DragManager';\nimport BackgroundImageBlock from './components/BackgroundImageBlock';\nimport BackgroundUploader from './components/BackgroundUploader';\n\nimport './styles/main.css';\n\nclass Board extends Component {\n\n\tbackgroundImageBlockRef = React.createRef();\n\n\tstate = {\n\t\tcolumns: JSON.parse(localStorage.getItem('columns')),\n\t\tbackgroundImageURL: localStorage.getItem('backgroundImageURL')\n\t};\n\n\taddNewColumn = (title, columnId) => {\n\t\tconst columns = Object.assign([], JSON.parse(localStorage.getItem('columns')));\n\t\tconst newColumn = { title: title, tasks: [] };\n\t\t\n\t\tcolumns.splice(columnId, 1, newColumn);\n\t\tcolumns.push({});\n\n\t\tlocalStorage.setItem('columns', JSON.stringify(columns));\n\t\tthis.setState({ columns: columns });\n\t};\n\n\taddColumnTask = (newTask, columnId) => {\n\t\tconst columns = Object.assign([], JSON.parse(localStorage.getItem('columns')));\n\t\tcolumns[columnId].tasks.push({ text: newTask });\n\n\t\tlocalStorage.setItem('columns', JSON.stringify(columns));\n\t\tthis.setState({ columns: columns });\n\t};\n\n\tupdateColumnTitle = (newTitle, columnId) => {\n\t\tconst columns = Object.assign([], JSON.parse(localStorage.getItem('columns')));\n\n\t\tif (columns[columnId] && columns[columnId].title) {\n\t\t\tcolumns[columnId].title = newTitle;\n\n\t\t\tlocalStorage.setItem('columns', JSON.stringify(columns));\n\t\t\tthis.setState({ columns: columns });\n\t\t}\n\t};\n\n\tupdateColumnTasks = (tasks, columnId) => {\n\t\tconst columns = Object.assign([], JSON.parse(localStorage.getItem('columns')));\n\n\t\tif (columns[columnId]) {\n\t\t\tcolumns[columnId].tasks = tasks;\n\n\t\t\tlocalStorage.setItem('columns', JSON.stringify(columns));\n\t\t\tthis.setState({ columns: columns });\n\t\t}\n\t};\n\n\tupdateColumnTask = (newTask, columnId, taskId) => {\n\t\tconst columns = Object.assign([], JSON.parse(localStorage.getItem('columns')));\n\t\t\n\t\tif (columns[columnId] && columns.length > 1 && columns[columnId].tasks[taskId]) {\n\t\t\tcolumns[columnId].tasks[taskId].text = newTask;\n\n\t\t\tlocalStorage.setItem('columns', JSON.stringify(columns));\n\t\t\tthis.setState({ columns: columns });\n\t\t}\n\t};\n\n\tdeleteColumnTask = (columnId, taskId) => {\n\t\tconst columns = Object.assign([], JSON.parse(localStorage.getItem('columns')));\n\t\tcolumns[columnId].tasks.splice(taskId, 1);\n\n\t\tlocalStorage.setItem('columns', JSON.stringify(columns));\n\t\tthis.setState({ columns: columns });\n\t};\n\n\tdeleteColumn = columnId => {\n\t\tconst columns = Object.assign([], JSON.parse(localStorage.getItem('columns')));\n\t\tcolumns.splice(columnId, 1);\n\n\t\tlocalStorage.setItem('columns', JSON.stringify(columns));\n\t\tthis.setState({ columns: columns });\n\t};\n\n\taddBackgroundImage = event => {\n\t\tconst image = event.target.files[0];\n\t\tconst reader = new FileReader();\n\t\tconst imageBlock = this.backgroundImageBlockRef.current;\n\n\t\tif (image.type.startsWith('image/')) {\n\t\t\treader.onload = () => {\n\t\t\t\timageBlock.style.background = `url(${reader.result})`;\n\t\t\t\timageBlock.style.backgroundSize = 'cover';\n\n\t\t\t\tlocalStorage.setItem('backgroundImageURL', JSON.stringify(reader.result));\n\t\t\t\tthis.setState({ backgroundImageURL: reader.result });\n\t\t\t};\n\n\t\t\treader.readAsDataURL(image);\n\t\t}\n\t};\n\n\tdeleteBackgroundImage = () => {\n\t\tconst imageBlock = this.backgroundImageBlockRef.current;\n\t\timageBlock.style.background = 'none';\n\t\t\n\t\tlocalStorage.setItem('backgroundImageURL', '');\t\n\t\tthis.setState({ backgroundImageURL: '' });\n\t};\n\n\tcomponentDidMount() {\n\t\tconst imageBlock = this.backgroundImageBlockRef.current;\n\t\tconst imageURL = localStorage.getItem('backgroundImageURL');\n\n\t\tif (imageURL) {\n\t\t\timageBlock.style.background = `url(${imageURL})`;\n\t\t\timageBlock.style.backgroundSize = 'cover';\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { columns } = this.state;\n\t\t\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<DragManager columns = { columns }\n\t\t\t\t\t\t\t addNewColumn = { this.addNewColumn } \n\t\t\t\t\t\t\t addColumnTask = { this.addColumnTask }\n\t\t\t\t\t\t\t updateColumnTasks = { this.updateColumnTasks }\n\t\t\t\t\t\t\t updateColumnTitle = { this.updateColumnTitle }\n\t\t\t\t\t\t\t updateColumnTask = { this.updateColumnTask } \n\t\t\t\t\t\t\t deleteColumnTask = { this.deleteColumnTask } \n\t\t\t\t\t\t\t deleteColumn = { this.deleteColumn } />\n\t\t\t\t<BackgroundImageBlock backgroundImageBlockRef = { this.backgroundImageBlockRef } />\n\t\t\t\t<BackgroundUploader addBackgroundImage = { this.addBackgroundImage } \n\t\t\t\t\t\t\t\t\tdeleteBackgroundImage = { this.deleteBackgroundImage }\n\t\t\t\t\t\t\t\t\tbackgroundImageBlockRef = { this.backgroundImageBlockRef } />\n\t\t\t</Fragment>\n\t\t)\n\t}\n}\n\nReactDOM.render(<Board />, document.getElementById('main-wrap'));\n"],"sourceRoot":""}